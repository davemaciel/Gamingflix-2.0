@echo off
chcp 65001 >nul
echo â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
echo â•‘   MIGRAÃ‡ÃƒO: SUPABASE â†’ MONGODB LOCAL                â•‘
echo â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
echo.
echo ğŸ” Verificando instalaÃ§Ã£o do Node.js...
where node >nul 2>&1
if errorlevel 1 (
    echo âŒ Node.js nÃ£o encontrado! Instale em: https://nodejs.org
    pause
    exit /b 1
)
echo âœ… Node.js encontrado
echo.

echo ğŸ” Verificando MongoDB...
echo.
call npm run check:mongodb
if errorlevel 1 (
    echo.
    echo âŒ MongoDB nÃ£o estÃ¡ rodando ou nÃ£o estÃ¡ instalado!
    echo.
    echo ğŸ’¡ Para instalar o MongoDB:
    echo    1. Baixe em: https://www.mongodb.com/try/download/community
    echo    2. Ou use Docker: docker run -d -p 27017:27017 --name mongodb mongo
    echo.
    echo Para iniciar o MongoDB (se jÃ¡ instalado):
    echo    - net start MongoDB
    echo.
    pause
    exit /b 1
)

echo.
echo â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
echo ğŸš€ Iniciando migraÃ§Ã£o dos dados...
echo â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
echo.

call npm run migrate:supabase-to-mongo

echo.
echo â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
echo âœ… Processo concluÃ­do!
echo â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
echo.
pause
