# Configuração Railway - Deploy Unificado (Frontend + Backend)
[phases.setup]
nixPkgs = ["nodejs_20"]

[phases.install]
# Instala dependências do frontend
cmds = ["npm ci"]

[phases.build]
# 1. Builda o frontend (gera pasta /dist)
# 2. Instala dependências do backend
cmds = [
  "npm run build",
  "cd backend && npm ci"
]

[start]
# Inicia o backend que serve o frontend buildado
cmd = "cd backend && npm start"
